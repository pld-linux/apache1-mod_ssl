--- mod_ssl-2.6.6-1.3.12/pkg.sslmod/mod_ssl.h~	Wed May  3 18:28:56 2000
+++ mod_ssl-2.6.6-1.3.12/pkg.sslmod/mod_ssl.h	Sun Nov 12 00:04:04 2000
@@ -338,8 +338,12 @@
 #define SSL_DBM_FILE_SUFFIX_PAG ".pag"
 #else /* !SSL_USE_SDBM */
 #if defined(__GLIBC__) && defined(__GLIBC_MINOR__) \
-    && __GLIBC__ >= 2 && __GLIBC_MINOR__ >= 1
+    && __GLIBC__ >= 2 && __GLIBC_MINOR__ == 1
 #include <db1/ndbm.h>
+#elif defined(__GLIBC__) && defined(__GLIBC_MINOR__) \
+    && __GLIBC__ >= 2 && __GLIBC_MINOR__ >= 2
+#define DB_DBM_HSEARCH 1
+#include <db.h>
 #else
 #include <ndbm.h>
 #endif
--- mod_ssl-2.6.6-1.3.12/pkg.sslmod/Makefile.tmpl~	Thu Feb 24 20:33:23 2000
+++ mod_ssl-2.6.6-1.3.12/pkg.sslmod/Makefile.tmpl	Sun Nov 12 00:02:32 2000
@@ -133,7 +133,7 @@
 
 libssl.so: $(OBJS_PIC)
 	rm -f $@
-	$(LD_SHLIB) $(SSL_LDFLAGS) $(LDFLAGS_SHLIB) -o $@ $(OBJS_PIC) $(SSL_LIBS) $(LIBS_SHLIB) 
+	$(LD_SHLIB) $(SSL_LDFLAGS) $(LDFLAGS_SHLIB) -o $@ $(OBJS_PIC) $(SSL_LIBS) $(LIBS_SHLIB) -lndbm
 
 .SUFFIXES: .o .lo
 
